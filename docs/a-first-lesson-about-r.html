<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 1 A first lesson about R | Crime Mapping in R</title>
  <meta name="description" content="Worksheets for labs of Crime Mapping course">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 1 A first lesson about R | Crime Mapping in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Worksheets for labs of Crime Mapping course" />
  <meta name="github-repo" content="maczokni/crimemapping_textbook_bookdown" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 A first lesson about R | Crime Mapping in R" />
  
  <meta name="twitter:description" content="Worksheets for labs of Crime Mapping course" />
  

<meta name="author" content="Juanjo Medina and Reka Solymosi">


<meta name="date" content="2019-03-04">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="making-your-first-maps-in-r.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.1.17/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.2/leaflet-providers-plugin.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Crime mapping in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prelude</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>0.1</b> Introduction</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i><b>0.2</b> Disclaimer</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html"><i class="fa fa-check"></i><b>1</b> A first lesson about R</a><ul>
<li class="chapter" data-level="1.1" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#install-r-rstudio"><i class="fa fa-check"></i><b>1.1</b> Install R &amp; RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#open-up-and-explore-rstudio"><i class="fa fa-check"></i><b>1.2</b> Open up and explore RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#customising-the-rstudio-look"><i class="fa fa-check"></i><b>1.3</b> Customising the RStudio look</a></li>
<li class="chapter" data-level="1.4" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#getting-organised-r-projects"><i class="fa fa-check"></i><b>1.4</b> Getting organised: R Projects</a></li>
<li class="chapter" data-level="1.5" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#talk-to-your-computer"><i class="fa fa-check"></i><b>1.5</b> Talk to your computer</a></li>
<li class="chapter" data-level="1.6" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#more-on-packages"><i class="fa fa-check"></i><b>1.6</b> More on packages</a></li>
<li class="chapter" data-level="1.7" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#using-objects"><i class="fa fa-check"></i><b>1.7</b> Using objects</a></li>
<li class="chapter" data-level="1.8" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#more-on-objects"><i class="fa fa-check"></i><b>1.8</b> More on objects</a></li>
<li class="chapter" data-level="1.9" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#vectors"><i class="fa fa-check"></i><b>1.9</b> Vectors</a></li>
<li class="chapter" data-level="1.10" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#on-comments"><i class="fa fa-check"></i><b>1.10</b> On comments</a></li>
<li class="chapter" data-level="1.11" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#factors"><i class="fa fa-check"></i><b>1.11</b> Factors</a></li>
<li class="chapter" data-level="1.12" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#naming-conventions-for-objects-in-r"><i class="fa fa-check"></i><b>1.12</b> Naming conventions for objects in R</a></li>
<li class="chapter" data-level="1.13" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#dataframes"><i class="fa fa-check"></i><b>1.13</b> Dataframes</a></li>
<li class="chapter" data-level="1.14" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#exploring-data"><i class="fa fa-check"></i><b>1.14</b> Exploring data</a></li>
<li class="chapter" data-level="1.15" data-path="a-first-lesson-about-r.html"><a href="a-first-lesson-about-r.html#quitting-rstudio"><i class="fa fa-check"></i><b>1.15</b> Quitting RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html"><i class="fa fa-check"></i><b>2</b> Making your first maps in R</a><ul>
<li class="chapter" data-level="2.1" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#a-quick-introduction-of-terms"><i class="fa fa-check"></i><b>2.1</b> A quick introduction of terms</a><ul>
<li class="chapter" data-level="2.1.1" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#geospatial-perspective---the-basics"><i class="fa fa-check"></i><b>2.1.1</b> Geospatial Perspective - The Basics</a></li>
<li class="chapter" data-level="2.1.2" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#summary"><i class="fa fa-check"></i><b>2.1.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#getting-some-spatial-data-to-put-on-a-map"><i class="fa fa-check"></i><b>2.2</b> Getting some spatial data to put on a map</a><ul>
<li class="chapter" data-level="2.2.1" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#a-first-look-at-basemaps"><i class="fa fa-check"></i><b>2.2.1</b> A first look at basemaps</a></li>
<li class="chapter" data-level="2.2.2" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#find-some-relevant-data-to-show-obtaining-data-on-crime"><i class="fa fa-check"></i><b>2.2.2</b> Find some relevant data to show: obtaining data on crime</a></li>
<li class="chapter" data-level="2.2.3" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#add-a-point-layer-to-your-basemap"><i class="fa fa-check"></i><b>2.2.3</b> Add a point layer to your basemap</a></li>
<li class="chapter" data-level="2.2.4" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#homework-1"><i class="fa fa-check"></i><b>2.2.4</b> HOMEWORK 1</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#from-dataframes-to-spatial-objects-finding-shapefiles"><i class="fa fa-check"></i><b>2.3</b> From dataframes to spatial objects: finding shapefiles</a></li>
<li class="chapter" data-level="2.4" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#reading-shapefiles-into-r-the-wonderful-world-of-sf-objects"><i class="fa fa-check"></i><b>2.4</b> Reading shapefiles into R: the wonderful world of sf objects</a><ul>
<li class="chapter" data-level="2.4.1" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#homework-2"><i class="fa fa-check"></i><b>2.4.1</b> <strong>HOMEWORK 2</strong></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#add-some-data"><i class="fa fa-check"></i><b>2.5</b> Add some data</a><ul>
<li class="chapter" data-level="2.5.1" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#data-wrangling-with-dplyr"><i class="fa fa-check"></i><b>2.5.1</b> Data wrangling with dplyr</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#join-data-to-spatial-object"><i class="fa fa-check"></i><b>2.6</b> Join data to spatial object</a></li>
<li class="chapter" data-level="2.7" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#so-left_join-eh"><i class="fa fa-check"></i><b>2.7</b> So left_join(), eh?</a></li>
<li class="chapter" data-level="2.8" data-path="making-your-first-maps-in-r.html"><a href="making-your-first-maps-in-r.html#lets-make-this-prettier-a-quick-glance-at-tmap"><i class="fa fa-check"></i><b>2.8</b> Let’s make this prettier: a quick glance at tmap</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html"><i class="fa fa-check"></i><b>3</b> Thematic maps in R</a><ul>
<li class="chapter" data-level="3.1" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#intro-and-recap"><i class="fa fa-check"></i><b>3.1</b> Intro and recap</a></li>
<li class="chapter" data-level="3.2" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#creating-choropleth-maps"><i class="fa fa-check"></i><b>3.2</b> Creating choropleth maps</a></li>
<li class="chapter" data-level="3.3" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#producing-small-multiples-to-compare-the-effect-of-different-classification-systems"><i class="fa fa-check"></i><b>3.3</b> Producing small multiples to compare the effect of different classification systems</a><ul>
<li class="chapter" data-level="3.3.1" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#homework-3.1"><i class="fa fa-check"></i><b>3.3.1</b> Homework 3.1</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#using-graduated-symbols"><i class="fa fa-check"></i><b>3.4</b> Using graduated symbols</a></li>
<li class="chapter" data-level="3.5" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#bringing-additional-census-data-in"><i class="fa fa-check"></i><b>3.5</b> Bringing additional census data in</a></li>
<li class="chapter" data-level="3.6" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#computing-and-mapping-crime-rates"><i class="fa fa-check"></i><b>3.6</b> Computing and mapping crime rates</a><ul>
<li class="chapter" data-level="3.6.1" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#homework-2-1"><i class="fa fa-check"></i><b>3.6.1</b> Homework 2</a></li>
<li class="chapter" data-level="3.6.2" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#homework-3"><i class="fa fa-check"></i><b>3.6.2</b> Homework 3</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="thematic-maps-in-r.html"><a href="thematic-maps-in-r.html#more-on-small-multiples-and-point-pattern-maps"><i class="fa fa-check"></i><b>3.7</b> More on small multiples and point pattern maps</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html"><i class="fa fa-check"></i><b>4</b> Performing spatial operations in R</a><ul>
<li class="chapter" data-level="4.1" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#getting-some-more-data"><i class="fa fa-check"></i><b>4.1</b> Getting some (more) data</a><ul>
<li class="chapter" data-level="4.1.1" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#reading-data-in-from-the-web"><i class="fa fa-check"></i><b>4.1.1</b> Reading data in from the web</a></li>
<li class="chapter" data-level="4.1.2" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#subsetting-using-pattern-matching"><i class="fa fa-check"></i><b>4.1.2</b> Subsetting using pattern matching</a></li>
<li class="chapter" data-level="4.1.3" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#geocoding-from-an-address"><i class="fa fa-check"></i><b>4.1.3</b> Geocoding from an address</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#making-interactive-maps-with-leaflet"><i class="fa fa-check"></i><b>4.2</b> Making interactive maps with leaflet</a><ul>
<li class="chapter" data-level="4.2.1" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#making-a-map"><i class="fa fa-check"></i><b>4.2.1</b> Making a map</a></li>
<li class="chapter" data-level="4.2.2" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#adding-some-content"><i class="fa fa-check"></i><b>4.2.2</b> Adding some content:</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#adding-points-manually"><i class="fa fa-check"></i><b>4.3</b> Adding points manually:</a><ul>
<li class="chapter" data-level="4.3.1" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#adding-data-from-elsewhere"><i class="fa fa-check"></i><b>4.3.1</b> Adding data from elsewhere</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#spatial-operations"><i class="fa fa-check"></i><b>4.4</b> Spatial operations</a><ul>
<li class="chapter" data-level="4.4.1" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#coordinate-reference-systems-revisited"><i class="fa fa-check"></i><b>4.4.1</b> Coordinate reference systems revisited</a></li>
<li class="chapter" data-level="4.4.2" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#meet-a-new-format-of-shapefile-geojson"><i class="fa fa-check"></i><b>4.4.2</b> Meet a new format of shapefile: geojson</a></li>
<li class="chapter" data-level="4.4.3" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#subset-points-to-those-within-a-polygon"><i class="fa fa-check"></i><b>4.4.3</b> Subset points to those within a polygon</a></li>
<li class="chapter" data-level="4.4.4" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#spatial-operations-two-building-buffers"><i class="fa fa-check"></i><b>4.4.4</b> Spatial operations two: building buffers</a></li>
<li class="chapter" data-level="4.4.5" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#points-in-polygon"><i class="fa fa-check"></i><b>4.4.5</b> Points in Polygon</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#recap"><i class="fa fa-check"></i><b>4.5</b> Recap</a></li>
<li class="chapter" data-level="4.6" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#homework"><i class="fa fa-check"></i><b>4.6</b> Homework</a><ul>
<li class="chapter" data-level="4.6.1" data-path="performing-spatial-operations-in-r.html"><a href="performing-spatial-operations-in-r.html#geocode-the-addresses"><i class="fa fa-check"></i><b>4.6.1</b> <strong>Geocode the addresses:</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html"><i class="fa fa-check"></i><b>5</b> More on thematic maps</a><ul>
<li class="chapter" data-level="5.1" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="5.1.1" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#pro-tip-do-i-need-to-install-this-package"><i class="fa fa-check"></i><b>5.1.1</b> Pro-tip: do I need to install this package?</a></li>
<li class="chapter" data-level="5.1.2" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#data"><i class="fa fa-check"></i><b>5.1.2</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#mapping-rates-learning-from-disease-mapping"><i class="fa fa-check"></i><b>5.2</b> Mapping rates, learning from disease mapping</a></li>
<li class="chapter" data-level="5.3" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#binning-points"><i class="fa fa-check"></i><b>5.3</b> Binning points</a><ul>
<li class="chapter" data-level="5.3.1" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#the-binning-process"><i class="fa fa-check"></i><b>5.3.1</b> The Binning Process</a></li>
<li class="chapter" data-level="5.3.2" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#different-binning-techniques"><i class="fa fa-check"></i><b>5.3.2</b> Different Binning Techniques</a></li>
<li class="chapter" data-level="5.3.3" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#homework-5.1"><i class="fa fa-check"></i><b>5.3.3</b> Homework 5.1</a></li>
<li class="chapter" data-level="5.3.4" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#multivariate-binning"><i class="fa fa-check"></i><b>5.3.4</b> Multivariate binning</a></li>
<li class="chapter" data-level="5.3.5" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#benefits-of-binning"><i class="fa fa-check"></i><b>5.3.5</b> Benefits of Binning</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#a-note-of-caution-maup"><i class="fa fa-check"></i><b>5.4</b> A note of caution: MAUP</a><ul>
<li class="chapter" data-level="5.4.1" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#what-is-maup"><i class="fa fa-check"></i><b>5.4.1</b> What is MAUP?</a></li>
<li class="chapter" data-level="5.4.2" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#why-does-maup-matter"><i class="fa fa-check"></i><b>5.4.2</b> Why does MAUP matter?</a></li>
<li class="chapter" data-level="5.4.3" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#what-can-we-do"><i class="fa fa-check"></i><b>5.4.3</b> What can we do?</a></li>
<li class="chapter" data-level="5.4.4" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#homework-5.2"><i class="fa fa-check"></i><b>5.4.4</b> Homework 5.2</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#replacing-polygons-with-grid-or-hex-shapes"><i class="fa fa-check"></i><b>5.5</b> Replacing polygons with grid or hex shapes</a><ul>
<li class="chapter" data-level="5.5.1" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#homework-5.3"><i class="fa fa-check"></i><b>5.5.1</b> Homework 5.3</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#cartograms"><i class="fa fa-check"></i><b>5.6</b> Cartograms</a></li>
<li class="chapter" data-level="5.7" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#references-and-further-reading"><i class="fa fa-check"></i><b>5.7</b> References and further reading</a><ul>
<li class="chapter" data-level="5.7.1" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#binning"><i class="fa fa-check"></i><b>5.7.1</b> Binning</a></li>
<li class="chapter" data-level="5.7.2" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#maup"><i class="fa fa-check"></i><b>5.7.2</b> MAUP</a></li>
<li class="chapter" data-level="5.7.3" data-path="more-on-thematic-maps.html"><a href="more-on-thematic-maps.html#transforming-polygons"><i class="fa fa-check"></i><b>5.7.3</b> Transforming polygons</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html"><i class="fa fa-check"></i><b>6</b> Studying spatial point patterns</a><ul>
<li class="chapter" data-level="6.1" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#what-well-do-today"><i class="fa fa-check"></i><b>6.1</b> What we’ll do today</a></li>
<li class="chapter" data-level="6.2" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#getting-the-data"><i class="fa fa-check"></i><b>6.2</b> Getting the data</a></li>
<li class="chapter" data-level="6.3" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#getting-the-data-into-spatstat-the-problem-with-duplicates"><i class="fa fa-check"></i><b>6.3</b> Getting the data into spatstat: the problem with duplicates</a></li>
<li class="chapter" data-level="6.4" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#inspecting-our-data-with-spatstat"><i class="fa fa-check"></i><b>6.4</b> Inspecting our data with spatstat</a></li>
<li class="chapter" data-level="6.5" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#density-estimates"><i class="fa fa-check"></i><b>6.5</b> Density estimates</a></li>
<li class="chapter" data-level="6.6" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#adding-some-context"><i class="fa fa-check"></i><b>6.6</b> Adding some context</a><ul>
<li class="chapter" data-level="6.6.1" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#homework-1-1"><i class="fa fa-check"></i><b>6.6.1</b> Homework 1</a></li>
<li class="chapter" data-level="6.6.2" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#homework-2-2"><i class="fa fa-check"></i><b>6.6.2</b> Homework 2</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="studying-spatial-point-patterns.html"><a href="studying-spatial-point-patterns.html#spatial-point-patterns-along-networks"><i class="fa fa-check"></i><b>6.7</b> Spatial point patterns along networks</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html"><i class="fa fa-check"></i><b>7</b> Global and local spatial autocorrelation</a><ul>
<li class="chapter" data-level="7.1" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#get-data"><i class="fa fa-check"></i><b>7.1</b> Get data</a></li>
<li class="chapter" data-level="7.2" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#what-is-a-neighbour"><i class="fa fa-check"></i><b>7.2</b> What is a neighbour?</a><ul>
<li class="chapter" data-level="7.2.1" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#homework-1-2"><i class="fa fa-check"></i><b>7.2.1</b> Homework 1</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#creating-a-list-of-neighbours"><i class="fa fa-check"></i><b>7.3</b> Creating a list of neighbours</a></li>
<li class="chapter" data-level="7.4" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#generating-the-weight-matrix"><i class="fa fa-check"></i><b>7.4</b> Generating the weight matrix</a><ul>
<li class="chapter" data-level="7.4.1" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#homework-2-3"><i class="fa fa-check"></i><b>7.4.1</b> Homework 2</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#compute-morans-i"><i class="fa fa-check"></i><b>7.5</b> Compute Moran’s I</a><ul>
<li class="chapter" data-level="7.5.1" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#homework-3-optional-practice"><i class="fa fa-check"></i><b>7.5.1</b> Homework 3 (Optional Practice)</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#week-7-local-spatial-autocorrelation"><i class="fa fa-check"></i><b>7.6</b> Week 7 : Local spatial autocorrelation</a></li>
<li class="chapter" data-level="7.7" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#prelude-1"><i class="fa fa-check"></i><b>7.7</b> Prelude</a></li>
<li class="chapter" data-level="7.8" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#get-data-and-built-the-weight-matrix"><i class="fa fa-check"></i><b>7.8</b> Get data and built the weight matrix</a></li>
<li class="chapter" data-level="7.9" data-path="global-and-local-spatial-autocorrelation.html"><a href="global-and-local-spatial-autocorrelation.html#generating-and-visualising-the-lisa-measures"><i class="fa fa-check"></i><b>7.9</b> Generating and visualising the LISA measures</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html"><i class="fa fa-check"></i><b>8</b> Regression analysis (a refresher)</a><ul>
<li class="chapter" data-level="8.1" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#introduction-2"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#motivating-regression"><i class="fa fa-check"></i><b>8.2</b> Motivating regression</a></li>
<li class="chapter" data-level="8.3" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#fitting-a-simple-regression-model"><i class="fa fa-check"></i><b>8.3</b> Fitting a simple regression model</a></li>
<li class="chapter" data-level="8.4" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#residuals-revisited-r-squared"><i class="fa fa-check"></i><b>8.4</b> Residuals revisited: R squared</a></li>
<li class="chapter" data-level="8.5" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#inference-with-regression"><i class="fa fa-check"></i><b>8.5</b> Inference with regression</a></li>
<li class="chapter" data-level="8.6" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#fitting-regression-with-categorical-predictors"><i class="fa fa-check"></i><b>8.6</b> Fitting regression with categorical predictors</a></li>
<li class="chapter" data-level="8.7" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#motivating-multiple-regression"><i class="fa fa-check"></i><b>8.7</b> Motivating multiple regression</a></li>
<li class="chapter" data-level="8.8" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#fitting-and-interpreting-a-multiple-regression-model"><i class="fa fa-check"></i><b>8.8</b> Fitting and interpreting a multiple regression model</a></li>
<li class="chapter" data-level="8.9" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#presenting-your-regression-results."><i class="fa fa-check"></i><b>8.9</b> Presenting your regression results.</a></li>
<li class="chapter" data-level="8.10" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#rescaling-input-variables-to-assist-interpretation"><i class="fa fa-check"></i><b>8.10</b> Rescaling input variables to assist interpretation</a></li>
<li class="chapter" data-level="8.11" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#testing-conditional-hypothesis-interactions"><i class="fa fa-check"></i><b>8.11</b> Testing conditional hypothesis: interactions</a></li>
<li class="chapter" data-level="8.12" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#model-building-and-variable-selection"><i class="fa fa-check"></i><b>8.12</b> Model building and variable selection</a></li>
<li class="chapter" data-level="8.13" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#regression-assumptions"><i class="fa fa-check"></i><b>8.13</b> Regression assumptions</a><ul>
<li class="chapter" data-level="8.13.1" data-path="regression-analysis-a-refresher.html"><a href="regression-analysis-a-refresher.html#homework-4"><i class="fa fa-check"></i><b>8.13.1</b> HOMEWORK</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html"><i class="fa fa-check"></i><b>9</b> Spatial regression models</a><ul>
<li class="chapter" data-level="9.1" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#introduction-3"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#looking-at-the-residuals-and-testing-for-spatial-autocorrelation-in-regression"><i class="fa fa-check"></i><b>9.2</b> Looking at the residuals and testing for spatial autocorrelation in regression</a></li>
<li class="chapter" data-level="9.3" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#what-to-do-now"><i class="fa fa-check"></i><b>9.3</b> What to do now?</a></li>
<li class="chapter" data-level="9.4" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#spatial-regimes"><i class="fa fa-check"></i><b>9.4</b> Spatial Regimes</a><ul>
<li class="chapter" data-level="9.4.1" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#homework-1-3"><i class="fa fa-check"></i><b>9.4.1</b> HOMEWORK 1</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#lagrange-multipliers"><i class="fa fa-check"></i><b>9.5</b> Lagrange multipliers</a><ul>
<li class="chapter" data-level="9.5.1" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#homework-2-4"><i class="fa fa-check"></i><b>9.5.1</b> HOMEWORK 2</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#fitting-and-interpreting-a-spatially-lagged-model"><i class="fa fa-check"></i><b>9.6</b> Fitting and interpreting a spatially lagged model</a></li>
<li class="chapter" data-level="9.7" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#fitting-an-interpreting-a-spatial-error-model"><i class="fa fa-check"></i><b>9.7</b> Fitting an interpreting a spatial error model</a><ul>
<li class="chapter" data-level="9.7.1" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#homework-3-1"><i class="fa fa-check"></i><b>9.7.1</b> HOMEWORK 3</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="spatial-regression-models.html"><a href="spatial-regression-models.html#interpreting-spatial-lag-coefficiences"><i class="fa fa-check"></i><b>9.8</b> Interpreting Spatial Lag Coefficiences</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="time-matters.html"><a href="time-matters.html"><i class="fa fa-check"></i><b>10</b> Time matters</a><ul>
<li class="chapter" data-level="10.1" data-path="time-matters.html"><a href="time-matters.html#crime-and-incident-trend-identification"><i class="fa fa-check"></i><b>10.1</b> Crime and incident trend identification</a><ul>
<li class="chapter" data-level="10.1.1" data-path="time-matters.html"><a href="time-matters.html#lubridate-your-guardian-angel-when-it-comes-to-working-with-temporal-data"><i class="fa fa-check"></i><b>10.1.1</b> Lubridate: your guardian angel when it comes to working with temporal data</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="time-matters.html"><a href="time-matters.html#aggregating-to-simple-intervals"><i class="fa fa-check"></i><b>10.2</b> Aggregating to simple intervals</a><ul>
<li class="chapter" data-level="10.2.1" data-path="time-matters.html"><a href="time-matters.html#aggregating-burglary-to-hour"><i class="fa fa-check"></i><b>10.2.1</b> Aggregating burglary to hour</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="time-matters.html"><a href="time-matters.html#visualising-time-on-a-map"><i class="fa fa-check"></i><b>10.3</b> Visualising time on a map</a></li>
<li class="chapter" data-level="10.4" data-path="time-matters.html"><a href="time-matters.html#time-series"><i class="fa fa-check"></i><b>10.4</b> Time series</a><ul>
<li class="chapter" data-level="10.4.1" data-path="time-matters.html"><a href="time-matters.html#moving-averages"><i class="fa fa-check"></i><b>10.4.1</b> Moving averages</a></li>
<li class="chapter" data-level="10.4.2" data-path="time-matters.html"><a href="time-matters.html#moving-average-in-r"><i class="fa fa-check"></i><b>10.4.2</b> Moving average in R</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime Mapping in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="a-first-lesson-about-r" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> A first lesson about R</h1>
<div id="install-r-rstudio" class="section level2">
<h2><span class="header-section-number">1.1</span> Install R &amp; RStudio</h2>
<p>We recommend that you use your own laptops for this course. This way you get used to working in an environment which you will continue to use after this semester. However, our lab sessions will be held in computer clusters in case you do not have access to a laptop (or something goes wrong…).</p>
<p>You <em>don’t need to install the software in the computers available in the clusters</em>, because it is already there. Beware though, the installation may vary a bit across different computer clusters in the University. This, on itself, is another good reason to use your own laptops -for it will provide you with a more stable environment. If you have not already, then please download and install R and R Studio onto your laptops. Otherwise use the cluster machines.</p>
<ul>
<li>click <a href="https://www.youtube.com/watch?v=eD07NznguA4">here</a> for instructions using Windows or</li>
<li><a href="https://www.youtube.com/watch?v=cX532N_XLIs&amp;list=PLqzoL9-eJTNDw71zWePXyHx3_cm_fMP8S">here</a> for instructions using a Mac.</li>
</ul>
</div>
<div id="open-up-and-explore-rstudio" class="section level2">
<h2><span class="header-section-number">1.2</span> Open up and explore RStudio</h2>
<p>In this session we will focus in developing basic familiarity with R Studio. You can use R without using R Studio, but R Studio is an app that makes it easier to work with R.</p>
<p>R Studio is what we call an IDE, an <strong>integrated development environment</strong>. It is a fancy way of saying that it is a cool interface designed to write programming code. Every time you open up R Studio you are in fact starting a R session. R Studio automatically runs R in the background. We will be interacting with R in this course unit via R Studio.</p>
<p><img src="img/rstudio.PNG" /></p>
<p>When you first open R Studio, you will see (as in the image above) that there are 3 main windows. The bigger one to your left is the console. If you read the text in the console you will see that R Studio is indeed opening R and you can see what version of R you are running. Depending on whether you are using the cluster machines or your own installation this may vary, but don’t worry too much about it. R is constantly being updated.</p>
<p><img src="img/openscript.png" /></p>
<p>The view in R Studio is structured so that you have 4 open windows in a regular session. Click in the <em>File</em> drop down Menu, select <em>New File</em>, then <em>R Script</em>. You will now see the 4 window areas in display. On each of these areas you can shift between different views and panels. You can also use your mouse to re-size the different windows if that is convenient.</p>
<p><img src="img/the4views.png" /></p>
<p>Look for example at the bottom right area. Within this area you can see that there are different tabs, which are associated with different views. You can see in the tabs in this section that there are different views available: <em>Files</em>, <em>Plots</em>, <em>Packages</em>, <em>Help</em>, and <em>Viewer</em>. The <strong>Files</strong> allow you to see the files in the physical directory that is currently set up as your working environment. You can think of it like a window in Windows Explorer that lets you see the content of a folder.</p>
<p>In the <strong>plots</strong> panel you will see any data visualisations or graphical displays of data that you produce. We haven’t yet produced any, so it is empty at the moment. If you click in <strong>packages</strong> you will see the packages that are currently available in your installation. What is a “package” in this context?</p>
<p>You can think of R as a Lego monster. You can make the monster scarier and more powerful by adding new bits to it. Packages are those bits. They are modules that expand what R can do. There are thousands of them. Which is pretty cool!!! R can do many more things than Excel. That is down to the fact that researchers all over the world write packages that continuously expand the functionality of R.
You can think of a package as another drop down menu that gets added to you menu tab with loads of new options for doing fancy stuff, only they are not really drop down menus. You need to access their added functionality via programming code. So yeah, R is like Excel or SPSS only with over 10,000 “drop down menus.” And all for free.</p>
<p>The other really useful panel in this part of the screen is the <strong>Help</strong> viewer. Here you can access the documentation for the various packages that make up R. Learning how to use this documentation will be essential if you want to be able to get the most from R.</p>
<p>In the diagonally opposite corner, the top left, you should now have an open script window. The <strong>script</strong> is where you write your programming code. A script is nothing but a text file with some code on it. Unlike other programs for data analysis you may have used in the past (Excel, SPSS), you need to interact with R by means of writing down instructions and asking R to evaluate those instructions. R is an <em>interpreted</em> programming language: you write instructions (code) that the R engine has to interpret in order to do something. And all the instructions we write can and should be saved in a script, so that you can return later to what you did.</p>
<p>One of the key advantages of doing data analysis this way - with code versus with a point and click interface like Excel or SPSS is that you are producing a written record of every step you take in the analysis. First time around it will take you time to write these instructions, it may be slower than pointing and clicking. And unlike with pointing and clicking you need to know the “words” and “grammar” of this language.</p>
<p>Luckily you don’t need to memorise or know all these words. As with any language the more you practice it, the easier it will become. More often than not you will be doing a lot of cutting and pasting from chunks of code we will give you. But we will also expect you to develop a basic understanding of what these bits of code do. It is a bit like cooking. At first you will just follow recipes as they are given to you, but as you become more comfortable in your “kitchen” you will feel more comfortable experimenting.</p>
<p>The advantage of doing analysis this way is that once you have written your instructions and saved them in a file, you will be able to share it with others and run it every time you want in a matter of seconds. This creates a <em>reproducible</em> record of your analysis: something that your collaborators or someone else anywhere (including your future self, the one that will have forgotten how to do the stuff) could run and get the same results than you did at some point earlier. This makes science more transparent and transparency brings with it many advantages. For example, it makes your research more trustworthy. Don’t underestimate how critical this is. <strong>Reproducibility</strong> is becoming a key criteria to assess good quality research. And tools like R allow us to enhance it. You may want to read more about reproducible research <a href="http://theconversation.com/the-science-reproducibility-crisis-and-what-can-be-done-about-it-74198">here</a>.</p>
</div>
<div id="customising-the-rstudio-look" class="section level2">
<h2><span class="header-section-number">1.3</span> Customising the RStudio look</h2>
<p>R Studio allows you to customise the way it looks. Working with white backgrounds is not generally a good idea if you care about your eyesight. If you don’t want to end up with dry eyes not only it is good you follow the 20-20-20 rule (every 20 minutes look for 20 seconds to an object located 20 feet away from you), but it may also be a good idea to use more eye friendly screen displays.</p>
<p>Click in the <em>Tools</em> menu and select <em>Global options</em>. This will open up a pop up window with various options. Select <em>Appearance</em>. In this section you can change the font type and size, but also the kind of theme background that R will use in the various windows. I suffer from poor sight, so I often increase the font type. I also use the <em>Tomorrow Night Bright</em> theme to prevent my eyes to go too dry from the effort of reading a lightened screen, but you may prefer a different one. You can preview them and then click apply to select the one you like. This will not change your results or analysis. This is just something you may want to do in order to make things look better and healthier for your.</p>
</div>
<div id="getting-organised-r-projects" class="section level2">
<h2><span class="header-section-number">1.4</span> Getting organised: R Projects</h2>
<p>We finished the previous section talking about sharing your analytic code. Let’s face it. You would not bring a new partner or somebody that you want to impress to your place before tidying a little bit first, wouldn’t you? In the same way, if you know you may have to share your code, if you know you may have guests, you may want to keep your analysis, data, and results tidy. R Studio helps a little bit with that. R Studio helps with this by virtue of something called <strong>R Projects</strong>.</p>
<p>Technically, a R Studio project is just a directory with the name of the project, and a few files and folders created by R Studio for internal purposes. This is where you should hold your scripts, your data, and reports. You can manage this folder with your own operating system manager (eg., Windows Explorer) or through the R Studio file manager (that you access in the bottom right corner set of windows in R Studio).</p>
<p>When a project is reopened, R Studio opens every file and data view that was open when the project was closed last time around. Let’s learn how to create a project. Go to the <em>File</em> drown menu and select <em>New Project</em>.</p>
<p><img src="img/newproject.png" /></p>
<p>That will open a dialog box where you ask to specify what kind of directory you want to create. Select new working directory in this dialog box.</p>
<p><img src="img/newproject2.PNG" /></p>
<p>Now you get another dialog box (at least you have an older version of R Studio) where you have to specify what kind of project you want to create. Select the first option <em>New Project</em>.</p>
<p><img src="img/newproject3.PNG" /></p>
<p>Finally, you get to select a name for your project (in the image below I use the code for this course unit, but you can use any sensible name you prefer) and you will need to specify the folder in which to place this directory. If you are using a cluster machine use the P: drive, otherwise select what you prefer in your laptop (preferably not your desktop in Windows machines).</p>
<p><img src="img/newproject4.PNG" /></p>
<p>With simple projects a single script file and a data file is all you may have. But with more complex projects, things can rapidly become messy. So you may want to create subdirectories within this project folder. I typically use the following structure in my own work to put all files of a certain type in the same subdirectory:</p>
<ul>
<li><p><em>Scripts and code</em>: Here I put all the text files with my analytic code, including rmarkdown files which is something we will introduce much later in the semester.</p></li>
<li><p><em>Source data</em>: Here I put the original data. I tend not to touch this once I have obtained the original data.</p></li>
<li><p><em>Documentation</em>: This is the subdirectory where I place all the data documentation (e.g., codebooks, questionnaires, etc.)</p></li>
<li><p><em>Modified data</em>: All analysis involve doing transformations and changing things in the original data files. You don’t want to mess up the original data files, so what you should do is create new data files as soon as you start changing your source data. I go so far as to place them in a different subdirectory.</p></li>
<li><p><em>Literature</em>: Analysis is all about answering research questions. There is always a literature about these questions. I place the relevant literature for the analytic project I am conducting in this subdirectory.</p></li>
<li><p><em>Reports and write up</em>: Here is where I file all the reports and data visualisations that are associated with my analysis.</p></li>
</ul>
<p>If you come to my office, you will see it is a very messy place. But my computer is, in contrast, a very tidy environment. You should aim for your computer workspace to be very organised as well. You can create these subdirectories using Windows Explorer or the Files window in R Studio. Why don’t you have a go?</p>
</div>
<div id="talk-to-your-computer" class="section level2">
<h2><span class="header-section-number">1.5</span> Talk to your computer</h2>
<p>Enough background, let’s write some very simple code to talk to your computer. First open a new script within the project you just created. Type the following instructions in the script window. After you are done click in the top right corner where it says <em>Run</em> (if you prefer quick shortcuts, you can select the text and then press Ctrl + Enter):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="st">&quot;I hate computers&quot;</span>)</code></pre>
<pre><code>## [1] &quot;I hate computers&quot;</code></pre>
<p>Congratulations!!! You just run your first line of R code! Though that was a really mean thing to say to your machine!</p>
<p>In these handouts (written in html format) you will see grayed boxes with bit of code on it. You can cut and paste this code into your script window and run the code from it to reproduce our results. As we go along we will be covering new bits of code. You should start thinking about creating a file with some of the most useful bits of code we cover so that when you do your work you can just cut and paste from this file rather than having to come back to these handouts.</p>
<p>Sometimes in these documents you will see on them the results of running the code, what you see printed in your console or in your plot viewer. The results will appear enclosed in a box as above.</p>
<p>The R languages uses <strong>functions</strong> to tell the computer what to do. In the R <em>language</em> functions are the <em>verbs</em>. You can think of functions as predefined commands that somebody has already programmed into R and tell R what to do. Here you learnt your first R function: <em>print</em>. All this function does is to ask R to print whatever it is you want in the main console (see the window in the bottom left corner).</p>
<p>In R, you can pass a number of <strong>arguments</strong> to any function. These arguments control what the function will do in each case. The arguments appear between brackets. Here we passed the text “I hate computers” as an argument. Once you execute the program, by clicking on <em>Run</em>, the R engine sends this to the CPU of your machine in the form of binary code and this produces a result. In this case we see that result printed in the main console.</p>
<p>Every R function admits different kind of arguments. Learning R involves not only learning different functions but also learning what are the valid arguments you can pass to each function.</p>
<p><img src="img/consoleresults.png" />
As indicated above, the window in the bottom left corner is the main <strong>console</strong>.You will see that the words “I hate computers” appear printed there. If rather than using R Studio you were working directly from R, that’s all you would get: the main console where you can write code interactively (rather than all the different windows you see in R Studio). You can write your code directly in the main console and execute it line by line in an interactive fashion. However, we will be running code from scripts, so that you get used to the idea of properly documenting all the steps you take,</p>
</div>
<div id="more-on-packages" class="section level2">
<h2><span class="header-section-number">1.6</span> More on packages</h2>
<p>Before we described packages as elements that add the functionality of R. What most packages do is they introduce new functions that allow you to ask R to do new different things.</p>
<p>Anybody can write a package, so consequently R packages vary on quality and complexity. You can find packages in different places, as well, from official repositories (which means they have passed a minimum of quality control), something called Git Hub (a webpage where software developers post work in progress), to personal webpages (danger danger!). In early 2017 we passed the 10,000 mark just in the main official repository, so the number of things that can be done with R grows exponentially every day as people keep adding new packages.</p>
<p>When you install R you only install a set of basic packages, not the full 10,000 plus. So if you want to use any of these added packages that are not part of the basic installation you need to first install them. You can see what packages are availabe in your local install by looking at the <em>packages</em> tab in the bottom right corner panel. Click there and check. We are going to install a package that is not there so that you see how the installation is done.</p>
<p><img src="img/packages.png" /></p>
<p>If you just installed R in your laptop you will see a shortish list of packages that constitute the basic installation of R. If you are using one of the machines in the computer cluster this list is a bit longer, because we asked IT to install some of the most commonly used packages. But knowing how to install packages is pretty essential, since you will want to do it very often.</p>
<p>We are going to install a package called “cowsay” to demonstrate the process. In the Packages panel there is an <em>Install</em> menu that would open a dialog box and allows you to install packages. Instead we are going to use code to do this. Just cut and paste the code below into your script and then run it:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;cowsay&quot;</span>)</code></pre>
<p>Here we are introducing a new function “install.packages” and what we have passed as an argument is the name of the package that we want to install. This is how we install a package <em>that is available in the official CRAN repository</em>. If we wanted to install a package from somewhere else we would have to adapt the code. Later this semester you will see how we install packages from Git Hub.</p>
<p>This line of code (as it is currently written) will install this package in a personal library that will be located in your P: drive if you are using a cluster machine. If you are using a Windows machine this will place this package within a personal library in your Documents folder. Once you install a package is in the machine/location where you install it until you physically delete it.
The code we have used by default connects to a cloud repository called <a href="https://cran.r-project.org/">CRAN</a> that has a collection of R packages that meet a minimum set of quality criteria. CRAN is the official repository of all things R. It’s a fairly safe place to get packages from. But beware, judging whether a package is good or not requires your input. We will come back to this several times during the semester to help you make wise choices regarding packages. Given that you are connecting to an online repository you will need an internet connection every time you want to install a package.</p>
<p>How do you find out what a package does? You look at the relevant documentation. In the Packages window scroll down until you find the new package we installed listed. Here you will see the name of the package (cowsay), a brief description of what the program is about, and the version you have installed (an indication that a package is a good package is that it has gone through several versions, that means that someone is making sure the package gets regular updates and improvements). The version I have for cowsay is 0.7.0. Yours may be older or newer. It doesn’t matter much at this point.</p>
<p>Click in the name <em>cowsay</em>. You will see that R Studio has now brought you to the Help tab. Here is where you find the help files for this package, including all the available documentation.</p>
<p>Every beginner in R will find these help files a bit confusing. But after a while, their format and structure will begin to make sense to you. Click where it says <em>User guides, package vignettes, and other documentation</em>. Documentation in R has become much better since people started to write <strong>vignettes</strong> for their packages. They are little tutorials that explain with examples what each package does. Click in the <em>cowsay::cowsay_tutorial</em> that you see listed here (the html link). What you will find there is an html file that gives you a detailed tutorial on this package. You don’t need to read it now, but remember that this is one way to find help when using R. You will learn to love vignettes.</p>
<p>Let’s try to use some of the functions of this package. We will use the “say” function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">say</span>(<span class="st">&quot;I hate computers&quot;</span>)</code></pre>
<p>You will get an error message telling you that this function could not be found. What happened? Installing a package is only the first step. The next step, when you want to use it in a given session, is to <strong>load</strong> it.</p>
<p>Think of it as a pair of shoes. You buy it once, but you have to take them from your closet and put them on when you want to use them. Same with packages, you only install once, but need to load it from your library every time you want to use it -within a given session (once loaded it will remain loaded until you finish your session).</p>
<p>To see what packages you currently have <strong>loaded</strong> in your session, you use the <code>search()</code> function (you do not need to pass it any arguments in this case).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">search</span>()</code></pre>
<pre><code>## [1] &quot;.GlobalEnv&quot;        &quot;package:stats&quot;     &quot;package:graphics&quot; 
## [4] &quot;package:grDevices&quot; &quot;package:utils&quot;     &quot;package:datasets&quot; 
## [7] &quot;package:methods&quot;   &quot;Autoloads&quot;         &quot;package:base&quot;</code></pre>
<p>If you run this code, you will see that <code>cowsay</code> is not in the list of loaded packages. To load a package we use the <strong>library</strong> function. So if we want to load the new package we installed in our machine we would need to use the following code:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;cowsay&quot;</span>)</code></pre>
<p>Run the <code>search</code> function again. You will see now this package is listed. So now we can try using the function “say” again.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">say</span>(<span class="st">&quot;I hate computers&quot;</span>)</code></pre>
<pre><code>## Colors cannot be applied in this environment :( Try using a terminal or RStudio.</code></pre>
<pre><code>## 
##  -------------- 
## I hate computers 
##  --------------
##     \
##       \
##         \
##             |\___/|
##           ==) ^Y^ (==
##             \  ^  /
##              )=*=(
##             /     \
##             |     |
##            /| | | |\
##            \| | |_|/\
##       jgs  //_// ___/
##                \_)
## </code></pre>
<p>You get a random animal in the console repeating the text we passed as an argument. If we like a different animal we could pass an argument to select it. So, say, we want to have cow rather than a random animal, then we would pass the following arguments to our function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">say</span>(<span class="st">&quot;I hate computers&quot;</span>, <span class="st">&quot;cow&quot;</span>)</code></pre>
<pre><code>## Colors cannot be applied in this environment :( Try using a terminal or RStudio.</code></pre>
<pre><code>## 
##  ----- 
## I hate computers 
##  ------ 
##     \   ^__^ 
##      \  (oo)\ ________ 
##         (__)\         )\ /\ 
##              ||------w|
##              ||      ||</code></pre>
<p>Remember, you only have to install a package that is not already installed once. But if you want to use it in a given session you will have to load it within that session using the <code>library</code> function. Once you load it within a session the package will remain loaded until you terminate your session (for example, by closing R Studio).</p>
</div>
<div id="using-objects" class="section level2">
<h2><span class="header-section-number">1.7</span> Using objects</h2>
<p>We have seen how the first argument that the “say” function takes is the text that we want to convert into speech for our given animal. We could write the text directly into the function, but now we are going to do something different. We are going to create an object to store the text.</p>
<p>An <strong>object</strong>? What do I mean? In the same way that everything you do in R you do with functions (your verbs), everything that exist in R is an object. You can think of objects as boxes where you put stuff. In this case we are going to create an object called <em>my_text</em> and inside this object we are going to store the text “I hate computers”. How do you do this? We will use the code below:</p>
<pre class="sourceCode r"><code class="sourceCode r">my_text &lt;-<span class="st"> &quot;I hate computers.&quot;</span></code></pre>
<p>This bit of code is simply telling R we are creating a new object with the assigned name (“my_text”). We are creating a box with such name and inside this box we are placing a bit of text (“I hate computers”). The arrow you see is the <strong>assignment operator</strong>. This is an important part of the R language that tells R what we are including inside the object in question.</p>
<p>Run the code. Look now at the <em>Environment</em> window in the right top corner. We see that this object is now listed there. You can think of the Environment as a warehouse where you put stuff in, your different objects. Is there a limit to this environment? Yes, your RAM. R works on your RAM, so you need to be aware that if you use very large objects you will need loads of RAM. But that won’t be a problem you will encounter in this course unit.</p>
<p>Once we put things into these boxes or objects we can use them as arguments in our functions. See the example below:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">say</span>(my_text, <span class="st">&quot;cow&quot;</span>)</code></pre>
<pre><code>## Colors cannot be applied in this environment :( Try using a terminal or RStudio.</code></pre>
<pre><code>## 
##  ----- 
## I hate computers. 
##  ------ 
##     \   ^__^ 
##      \  (oo)\ ________ 
##         (__)\         )\ /\ 
##              ||------w|
##              ||      ||</code></pre>
</div>
<div id="more-on-objects" class="section level2">
<h2><span class="header-section-number">1.8</span> More on objects</h2>
<p>Isn’t this a course on data analysis? Yes, of course, but before we get there, you need to get used to the basics of R and R Studio, which is what we will be doing in these early sessions. Let’s go through some of these basics a bit more slowly to ensure you get them and then we will bring some data you can look at.</p>
<p>In Excel you are used to see your data in a spreadsheet format. If you did the prep for this session, you should have reviewed some of the materials we covered in <em>Making Sense of Criminological Data</em> last semester. You should be familiar with the notion of a data set, levels of measurement, and tidy data. If you have not. This is your chance to do it in <a href="https://rawgit.com/maczokni/MSCD/master/book/bookdown-demo-master/bookdown-demo-master/docs/week1.html#data-variables-and-observations">this link</a>.</p>
<p>R is considerably more flexible than Excel. Most of the work we do here will use data sets or <strong>dataframes</strong> as they are called in R. But as you have seen earlier you can have <em>objects</em> other than data frames in R. These objects can relate to external files or simple textual information (“I hate computers”). This flexibility is a big asset because among other things it allow us to break down data frames or the results from doing analysis on them to its constitutive parts (this will become clearer as we go along).</p>
<p>Technically R is an <em>Object Oriented language</em>. Object-oriented programming (OOP) is a programming language model organized around objects rather than “actions” and data rather than logic.</p>
<p>As we have seen earlier, to create an object you have to give it a name, and then use the assignment operator (the <code>&lt;-</code> symbol) to assign it some value.</p>
<p>For example, if we want to create an object that we name “x”, and we want it to represent the value of 5, we write:</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">5</span></code></pre>
<p>We are simply telling R to create a <strong>numeric object</strong>, called <code>x</code>, with one element (5) or of length 1. It is numeric because we are putting a number inside this object. The length is 1 because it only has one element on it, the number 5.</p>
<p>You can see the content of the object <code>x</code> in the main console either by using the print function we used earlier or by auto-printing, that is, just typing the name of the object and running that as code:</p>
<pre class="sourceCode r"><code class="sourceCode r">x</code></pre>
<pre><code>## [1] 5</code></pre>
<p>When writing expressions in R is very important you understand that <strong>R is case sensitive</strong>. This could drive you nuts if you are not careful. More often than not if you write an expression asking R to do something and R returns an error message, chances are that you have used lower case when upper case was needed (or vice-versa). So always check for the right spelling. For example, see what happens if I use a capital ‘X’:</p>
<pre class="sourceCode r"><code class="sourceCode r">X</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;X&#39; not found</code></pre>
<p>You will get the following message: <code>&quot;Error in eval(expr, envir, enclos): object 'X' not found&quot;</code>. R is telling us that <code>X</code> does not exist. There isn’t an object <code>X</code> (upper case), but there is an object <code>x</code> (lower case). Error messages in R are pretty good at telling you exactly what went wrong.</p>
<p>Remember computers are very literal. They are like dogs. You can tell a dog “sit” and if it has been trained it will sit. But if you tell a dog “would you be so kind as to relax a bit and lay down in the sofa?”, it won’t have a clue what you are saying and will stare at you like you have gone mad. Error messages are computers ways of telling us “I really want to help you but I don’t really understand what you mean” (never take them personal, computers don’t hate you).</p>
<p>When you get an error message or implausible results, you want to look back at your code to figure out what is the problem. This process is called <strong>debugging</strong>. There are some proper systematic ways to write code that facilitate debugging, but we won’t get into that here. R is very good with automatic error handling at the levels we’ll be using it at. Very often the solution will simply involve correcting the spelling.</p>
<p>A handy tip is to cut and paste the error message into Google and find a solution. If anybody had given me a penny for every time I had to do that myself, I would be Bill Gates by now. People make mistakes all the time. It’s how we learn. Don’t get frustrated, don’t get stuck. Instead look for a solution. These days we have Google. We didn’t back in the day. Now you have the answer to your frustration within quick reach. Use it to your advantage.</p>
</div>
<div id="vectors" class="section level2">
<h2><span class="header-section-number">1.9</span> Vectors</h2>
<p>Now that you are a bit more familiar with the idea of an object, we can start talking about a particular type of objects, specifically we are going to discuss <strong>vectors</strong>.</p>
<p>What is a vector? A vector is simply a set of elements <em>of the same class</em> (typically these classes are: character, numeric, integer, or logical -as in True/False). Vectors are the basic data structure in R.</p>
<p>Typically you will use the <code>c()</code> function (c stands for concatenate) to create vectors. The code below exemplifies how to create vectors of different classes (numeric, logical, etc.). Notice how the listed elements (to simplify there are two elements in each vector below) are separated by commas:</p>
<pre class="sourceCode r"><code class="sourceCode r">my_1st_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.6</span>) <span class="co">#creates a numeric vector with two elements</span>
my_2nd_vector &lt;-<span class="st"> </span><span class="kw">c</span>(1L, 2L) <span class="co">#creates an integer vector</span>
my_3rd_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>) <span class="co">#creates a logical vector</span>
my_4th_vector &lt;-<span class="st"> </span><span class="kw">c</span>(T, F) <span class="co">#creates a logical vector using abbreviations of True and False, but you should avoid this formulation an instead use the full word.</span>
my_5th_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>) <span class="co">#creates a character vector</span>
my_6th_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">+</span>0i, <span class="dv">2</span><span class="op">+</span>4i) <span class="co">#creates a complex vector (we won&#39;t really use this class)</span></code></pre>
<p>Cut and paste this code into your script and run it. You will see how all these vectors are added to your global environment and stored there.</p>
<p>The beauty of an object oriented statistical language like R is that one you have these objects you can use them as <strong>inputs</strong> in functions, use them in operations, or to create other objects. This makes R very flexible. See some examples below:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(my_1st_vector) <span class="co">#a function to figure out the class of the vector</span></code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(my_1st_vector) <span class="co">#a function to figure out the length of the vector</span></code></pre>
<pre><code>## [1] 2</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">my_1st_vector <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="co">#Add a constant to each element of the vector</span></code></pre>
<pre><code>## [1] 2.5 2.6</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">my_7th_vector &lt;-<span class="st"> </span>my_1st_vector <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co">#Create a new vector that contains the elements of my1stvector plus a constant of 1</span>
my_1st_vector <span class="op">+</span><span class="st"> </span>my_7th_vector <span class="co">#Adds the two vectors and auto-print the results (note how the sum was done)</span></code></pre>
<pre><code>## [1] 2.0 2.2</code></pre>
<p>As indicated earlier, when you create objects you will place them in your working memory or workspace. Each R session will be associated to a workspace (called “global environment” in R Studio). In R Studio you can visualise the objects you have created during a session in the <strong>Global Environment</strong> screen. But if you want to produce a list of what’s there you can use the <code>ls()</code> function (the results you get my differ from the ones below depending on what you actually have in your global environment).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>() <span class="co">#list all objects in your global environment</span></code></pre>
<pre><code>## [1] &quot;my_1st_vector&quot; &quot;my_2nd_vector&quot; &quot;my_3rd_vector&quot; &quot;my_4th_vector&quot;
## [5] &quot;my_5th_vector&quot; &quot;my_6th_vector&quot; &quot;my_7th_vector&quot; &quot;my_text&quot;      
## [9] &quot;x&quot;</code></pre>
<p>If you want to delete a particular object you can do so using the <code>rm()</code> function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(x) <span class="co">#remove x from your global environment</span></code></pre>
<p>It is also possibly to remove all objects at once:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>()) <span class="co">#remove all objects from your global environment</span></code></pre>
<p>If you mix in a vector elements that are of a different class (for example numerical and logical), R will <strong>coerce</strong> to the minimum common denominator, so that every element in the vector is of the same class. So, for example, if you input a number and a character, it will coerce the vector to be a character vector -see the example below and notice the use of the <code>class()</code> function to identify the class of an object.</p>
<pre class="sourceCode r"><code class="sourceCode r">my_8th_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.5</span>, <span class="st">&quot;a&quot;</span>)
<span class="kw">class</span>(my_8th_vector) <span class="co">#The class() function will tell us the class of the vector</span></code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
</div>
<div id="on-comments" class="section level2">
<h2><span class="header-section-number">1.10</span> On comments</h2>
<p>In the bits of code above you will have noticed parts that were grayed out. See for example in the last example provided. You can see that after the hash-tag all the text is being grayed out. What is this? What’s going on?</p>
<p>These are <strong>comments</strong>. Comments are simply annotations that R will know is not code (and therefore doesn’t attempt to understand and execute). We use the hash-tag symbol to specify to R that what comes after is not programming code, but simply bits of notes that we write to remind ourselves what the code is actually doing. Including these comments will help you to understand your code when you come back to it.</p>
<p>To create a comment you use the hash-tag/ number sign <code>#</code> followed by some text. Whenever the R engine sees the number sign it knows that what follows is not code to be executed. You can use this sign to include <em>annotations</em> when you are coding. These annotations are a helpful reminder to yourself (and others reading your code) of <strong>what</strong> the code is doing and (even more important) <strong>why</strong> you are doing it.</p>
<p>It is good practice to often use annotations. You can use these annotations in your code to explain your reasoning and to create “scannable” headings in your code. That way after you save your script you will be able to share it with others or return to it at a later point and understand what you were doing when you first created it -see <a href="http://www.screenr.com/1VN8">here for further details on annotations and in how to save a script when working with the basic R interface</a>.</p>
<p>Just keep in mind:
+ You need one <code>#</code> per line, and anything after that is a comment that is not executed by R.</p>
<ul>
<li>You can use spaces after (its not like a hash-tag on twitter).</li>
</ul>
</div>
<div id="factors" class="section level2">
<h2><span class="header-section-number">1.11</span> Factors</h2>
<p>An important thing to understand in R is that categorical (ordered, also called ordinal, or unordered, also called nominal) data are typically encoded as <strong>factors</strong>, which are just a special type of vector. A factor is simply an integer vector that can contain <em>only predefined values</em> (this bit is very important), and is used to store categorical data. Factors are treated specially by many data analytic and visualisation functions. This makes sense because they are essentially different from quantitative variables.</p>
<p>Although you can use numbers to represent categories, <em>using factors with labels is better than using integers to represent categories</em> because factors are self-describing (having a variable that has values “Male” and “Female” is better than a variable that has values “1” and “2” to represent male and female). When R reads data in other formats (e.g., comma separated), by default it will automatically convert all character variables into factors. If you rather keep these variables as simple character vectors you need to explicitly ask R to do so. We will come back to this next week with some examples.</p>
<p>Factors can also be created with the <code>factor()</code> function concatenating a series of <em>character</em> elements. You will notice that is printed differently from a simply character vector and that it tells us the levels of the factor (look at the second printed line).</p>
<pre class="sourceCode r"><code class="sourceCode r">the_smiths &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Morrisey&quot;</span>, <span class="st">&quot;Marr&quot;</span>, <span class="st">&quot;Rourke&quot;</span>, <span class="st">&quot;Joyce&quot;</span>)) <span class="co">#create a new factor</span>
the_smiths <span class="co">#auto-print the factor</span></code></pre>
<pre><code>## [1] Morrisey Marr     Rourke   Joyce   
## Levels: Joyce Marr Morrisey Rourke</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Alternatively for similar result using the as.factor() function</span>
the_smiths_bis &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Morrisey&quot;</span>, <span class="st">&quot;Marr&quot;</span>, <span class="st">&quot;Rourke&quot;</span>, <span class="st">&quot;Joyce&quot;</span>) <span class="co">#create a character vector</span>
the_smiths_f &lt;-<span class="st"> </span><span class="kw">as.factor</span>(the_smiths_bis) <span class="co">#create a factor using a character vector</span>
the_smiths_f <span class="co">#auto-print factor</span></code></pre>
<pre><code>## [1] Morrisey Marr     Rourke   Joyce   
## Levels: Joyce Marr Morrisey Rourke</code></pre>
<p>Factors in R can be seen as vectors with a bit more information added. This extra information consists of a record of the distinct values in that vector, called <strong>levels</strong>. If you want to know the levels in a given factor you can use the <code>levels()</code> function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(the_smiths)</code></pre>
<pre><code>## [1] &quot;Joyce&quot;    &quot;Marr&quot;     &quot;Morrisey&quot; &quot;Rourke&quot;</code></pre>
<p>Notice that the levels appear printed by alphabetical order. There will be situations when this is not the most convenient order. Later on we will discuss in these tutorials how to reorder your factor levels when you need to.</p>
</div>
<div id="naming-conventions-for-objects-in-r" class="section level2">
<h2><span class="header-section-number">1.12</span> Naming conventions for objects in R</h2>
<p>You may have noticed the various names I have used to designate objects (<code>my_1st_vector</code>, <code>the_smiths</code>, etc.). You can use almost any names you want for your objects. Objects in R can have names of any length consisting of letters, numbers, underscores (&quot;_“) or the period (”.&quot;) and should begin with a letter. In addition, when naming objects you need to remember:</p>
<ul>
<li><p><em>Some names are forbidden</em>. These include words such as FALSE and TRUE, logical operators, and programming words like Inf, for, else, break, function, and words for special entities like NA and NaN.</p></li>
<li><p><em>You want to use names that do not correspond to a specific function.</em> We have seen, for example, that there is a function called <code>print()</code>, you don’t want to call an object “print” to avoid conflicts. To avoid this use nouns instead of verbs for naming your variables and data.</p></li>
<li><p><em>You don’t want them to be too long</em> (or you will regret it every time you need to use that object in your analysis: your fingers will bleed from typing).</p></li>
<li><p><em>You want to make them as intuitive to interpret as possible.</em></p></li>
<li><p><em>You want to follow consistent naming conventions.</em> <a href="http://journal.r-project.org/archive/2012-2/RJournal_2012-2_Baaaath.pdf">R users are terrible about this</a>. But we could make it better if we all aim to follow similar conventions. In these handouts you will see I follow the <code>underscore_separated</code> convention -see <a href="http://robinlovelace.net/r/2014/07/15/naming-conventions-r.html">here</a> for details.</p></li>
</ul>
<p>It is also important to remember that R will always treat numbers as numbers. This sounds straightforward, but actually it is important to note. We can name our variables almost anything. EXCEPT they cannot be numbers. Numbers are <strong>protected</strong> by R. 1 will always mean 1.</p>
<p>If you want, give it a try. Try to create a variable called 12 and assign it the value “twelve”. As we did last week, we can assign something a meaning by using the “&lt;-” characters.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">12</span> &lt;-<span class="st"> &quot;twelve&quot;</span></code></pre>
<pre><code>## Error in 12 &lt;- &quot;twelve&quot;: invalid (do_set) left-hand side to assignment</code></pre>
<p>You get an error!</p>
</div>
<div id="dataframes" class="section level2">
<h2><span class="header-section-number">1.13</span> Dataframes</h2>
<p>Ok, so now that you understand some of the basic types of objects you can use in R, let’s start taking about data frames. One of the most common objects you will work with in this course are <strong>data frames</strong>. Data frames can be created with the <code>data.frame()</code> function.</p>
<p>Data frames are <em>multiple vectors</em> of possibly different classes (e.g., numeric, factors), but of the same length (e.g., all vectors, or variables, have the same number of rows). This may sound a bit too technical but it is simply a way of saying that a data frame is what in other programmes for data analysis gets represented as data sets, the tabular spreadsheets you have seen when using Excel.</p>
<p>Let’s create a data frame with two variables:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#We create a dataframe called mydata.1 with two variables, an integer vector called foo and a logical vector called bar</span>
mydata_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">foo =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">bar =</span> <span class="kw">c</span>(T,T,F,F))
mydata_<span class="dv">1</span></code></pre>
<pre><code>##   foo   bar
## 1   1  TRUE
## 2   2  TRUE
## 3   3 FALSE
## 4   4 FALSE</code></pre>
<p>Or alternatively for the same result:</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>
y &lt;-<span class="st"> </span><span class="kw">c</span>(T, T, F, F)
mydata_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span> (<span class="dt">foo =</span> x, <span class="dt">bar =</span> y)
mydata_<span class="dv">2</span></code></pre>
<pre><code>##   foo   bar
## 1   1  TRUE
## 2   2  TRUE
## 3   3 FALSE
## 4   4 FALSE</code></pre>
<p>As you can see in R, as in any other language, there are multiple ways of saying the same thing. Programmers aim to produce code that has been optimised: it is short and quick. It is likely that as you develop your R skills you find increasingly more efficient ways of asking R how to do things. What this means too is that when you go for help, from your peers or us, we may teach you slightly different ways of getting the right result. As long as you get the right result that’s what at this point really matters.</p>
<p>These are silly toy examples of data frames. In this course, we will use real data. Next week we will learn in greater detail how to read data into R. But you should also know that R comes with pre-installed data sets. Some packages in fact are nothing but collections of data frames.</p>
<p>Let’s have a look at some of them. We are going to look at some data that are part of the <em>fivethirtyeight</em> package. This package contains data sets and code behind the stories in <a href="http://fivethirtyeight.com/">this particular online newspaper</a>. This package is not part of the base installation of R, so you will need to install it first. I won’t give you the code for it. See if you can figure it out by looking at previous examples.</p>
<p>Done? Ok, now we are going to look at the data sets that are included in this package. Remember first we have to load the package if we want to use it:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;fivethirtyeight&quot;</span>)
<span class="kw">data</span>(<span class="dt">package=</span><span class="st">&quot;fivethirtyeight&quot;</span>) <span class="co">#This function will return all the data frames that are available in the named package.</span></code></pre>
<p>Notice that this package has some data sets that relate to stories covered in this journal that had a criminological angle. Let’s look for example at the hate_crimes data set. How do you that? First we have to load the data frame into our global environment. To do so use the following code:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;hate_crimes&quot;</span>)</code></pre>
<p>This function will search among all the <em>loaded</em> packages and locate the hate_crimes data set. Notice that it now appears in the global environment, although it also says “promise” next to it. To see the data in full you need to do something to it first. So let’s do that.</p>
<p>Every object in R can have <strong>attributes</strong>. These are: names; dimensions (for matrices and arrays: number of rows and columns) and dimensions names; class of object (numeric, character, etc.); length (for a vector this will be the number of elements in the vector); and other user-defined. You can access the attributes of an object using the <code>attributes()</code> function. Let’s query R for the attributes of this data frame.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(hate_crimes)</code></pre>
<pre><code>## $class
## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;
## 
## $row.names
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
## [24] 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46
## [47] 47 48 49 50 51
## 
## $spec
## $cols
## $cols$state
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_character&quot; &quot;collector&quot;          
## 
## $cols$median_household_income
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_integer&quot; &quot;collector&quot;        
## 
## $cols$share_unemployed_seasonal
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$share_population_in_metro_areas
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$share_population_with_high_school_degree
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$share_non_citizen
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$share_white_poverty
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$gini_index
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$share_non_white
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$share_voters_voted_trump
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$hate_crimes_per_100k_splc
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## $cols$avg_hatecrimes_per_100k_fbi
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_double&quot; &quot;collector&quot;       
## 
## 
## $default
## list()
## attr(,&quot;class&quot;)
## [1] &quot;collector_guess&quot; &quot;collector&quot;      
## 
## attr(,&quot;class&quot;)
## [1] &quot;col_spec&quot;
## 
## $names
##  [1] &quot;state&quot;                       &quot;median_house_inc&quot;           
##  [3] &quot;share_unemp_seas&quot;            &quot;share_pop_metro&quot;            
##  [5] &quot;share_pop_hs&quot;                &quot;share_non_citizen&quot;          
##  [7] &quot;share_white_poverty&quot;         &quot;gini_index&quot;                 
##  [9] &quot;share_non_white&quot;             &quot;share_vote_trump&quot;           
## [11] &quot;hate_crimes_per_100k_splc&quot;   &quot;avg_hatecrimes_per_100k_fbi&quot;</code></pre>
<p>These results printed in the may console may not make too much sense to you at this point. We will return to this next week, so do not worry.</p>
<p>Go now to the global environment panel and left click on the data frame hate_crimes. This will open the data viewer in the top left section of R Studio. What you get there is a spreadsheet with 12 variables and 51 observations. Each variable in this case is providing you with information (demographics, voting patterns, and hate crime) about each of the US states.</p>
<p><img src="img/dataview.png" /></p>
</div>
<div id="exploring-data" class="section level2">
<h2><span class="header-section-number">1.14</span> Exploring data</h2>
<p>Ok, let’s now have a quick look at the data. There are so many different ways of producing summary stats for data stored in R that is impossible to cover them all! We will just introduce a few functions that you may find useful for summarising data. Before we do any of that it is important you get a sense for what is available in this data set. Go to the help tab and in the search box input the name of the data frame, this will take you to the documentation for this data frame. Here you can see a list of the available variables.</p>
<p><img src="img/codebook.png" /></p>
<p>Let’s start with the <em>mean</em>. This function takes as an argument the numeric variable for which you want to obtain the mean. Because of the way that R works you cannot simply put the name of the variable you have to tell R as well in which data frame is that variable located. To do that you write the name of the data frame, the dollar sign, and then the name of the variable you want to summarise. If you want to obtain the mean of the variable that gives us the proportion of people that voted for Donald Trump you can use the following expression:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(hate_crimes<span class="op">$</span>share_vote_trump)</code></pre>
<pre><code>## [1] 0.49</code></pre>
<p>Another function you may want to use with numeric variables is <code>summary()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(hate_crimes<span class="op">$</span>share_vote_trump)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.040   0.415   0.490   0.490   0.575   0.700</code></pre>
<p>This gives you the five number summary (minimum, first quartile, median, third quartile, and maximum, plus the mean and the count of missing values if there are any).</p>
<p>You don’t have to specify a variable you can ask for these summaries from the whole data frame:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(hate_crimes)</code></pre>
<pre><code>##     state           median_house_inc share_unemp_seas  share_pop_metro 
##  Length:51          Min.   :35521    Min.   :0.02800   Min.   :0.3100  
##  Class :character   1st Qu.:48657    1st Qu.:0.04200   1st Qu.:0.6300  
##  Mode  :character   Median :54916    Median :0.05100   Median :0.7900  
##                     Mean   :55224    Mean   :0.04957   Mean   :0.7502  
##                     3rd Qu.:60719    3rd Qu.:0.05750   3rd Qu.:0.8950  
##                     Max.   :76165    Max.   :0.07300   Max.   :1.0000  
##                                                                        
##   share_pop_hs    share_non_citizen share_white_poverty   gini_index    
##  Min.   :0.7990   Min.   :0.01000   Min.   :0.04000     Min.   :0.4190  
##  1st Qu.:0.8405   1st Qu.:0.03000   1st Qu.:0.07500     1st Qu.:0.4400  
##  Median :0.8740   Median :0.04500   Median :0.09000     Median :0.4540  
##  Mean   :0.8691   Mean   :0.05458   Mean   :0.09176     Mean   :0.4538  
##  3rd Qu.:0.8980   3rd Qu.:0.08000   3rd Qu.:0.10000     3rd Qu.:0.4665  
##  Max.   :0.9180   Max.   :0.13000   Max.   :0.17000     Max.   :0.5320  
##                   NA&#39;s   :3                                             
##  share_non_white  share_vote_trump hate_crimes_per_100k_splc
##  Min.   :0.0600   Min.   :0.040    Min.   :0.06745          
##  1st Qu.:0.1950   1st Qu.:0.415    1st Qu.:0.14271          
##  Median :0.2800   Median :0.490    Median :0.22620          
##  Mean   :0.3157   Mean   :0.490    Mean   :0.30409          
##  3rd Qu.:0.4200   3rd Qu.:0.575    3rd Qu.:0.35694          
##  Max.   :0.8100   Max.   :0.700    Max.   :1.52230          
##                                    NA&#39;s   :4                
##  avg_hatecrimes_per_100k_fbi
##  Min.   : 0.2669            
##  1st Qu.: 1.2931            
##  Median : 1.9871            
##  Mean   : 2.3676            
##  3rd Qu.: 3.1843            
##  Max.   :10.9535            
##  NA&#39;s   :1</code></pre>
<p>There are multiple ways of getting results in R. Particularly for basic and intermediate-level statistical analysis many core functions and packages can give you the answer that you are looking for. For example, there are a variety of packages that allow you to look at summary statistics using functions defined within those packages. You will need to install these packages before you can use them.</p>
<p>I am only going to introduce one of them here <em>skimr</em>. It is neat and is maintained by one of my former stats teachers, the criminologist Elin Waring. You will need to install it before anything else. Use the code you have learnt to do so and then load it. I won’t be providing you the code for it, by now you should now how to do this.</p>
<p>Once you have loaded the <em>skimr</em> package you can use it. Its main function is <em>skim</em>. Like <em>summary</em> for data frames, skim presents results for all the columns and the statistics will depend on the class of the variable. However, the results are displayed and stored in a nicer way -though we won’t get into the details of this right now.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">skim</span>(hate_crimes)</code></pre>
<p>Skim summary statistics<br />
n obs: 51<br />
n variables: 12</p>
<p>Variable type: character</p>
<table>
<thead>
<tr class="header">
<th align="center">variable</th>
<th align="center">missing</th>
<th align="center">complete</th>
<th align="center">n</th>
<th align="center">min</th>
<th align="center">max</th>
<th align="center">empty</th>
<th align="center">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">state</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">4</td>
<td align="center">20</td>
<td align="center">0</td>
<td align="center">51</td>
</tr>
</tbody>
</table>
<p>Variable type: integer</p>
<table>
<thead>
<tr class="header">
<th align="center">variable</th>
<th align="center">missing</th>
<th align="center">complete</th>
<th align="center">n</th>
<th align="center">mean</th>
<th align="center">sd</th>
<th align="center">p0</th>
<th align="center">p25</th>
<th align="center">p50</th>
<th align="center">p75</th>
<th align="center">p100</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">median_house_inc</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">55223.61</td>
<td align="center">9208.48</td>
<td align="center">35521</td>
<td align="center">48657</td>
<td align="center">54916</td>
<td align="center">60719</td>
<td align="center">76165</td>
</tr>
</tbody>
</table>
<p>Variable type: numeric</p>
<table>
<thead>
<tr class="header">
<th align="center">variable</th>
<th align="center">missing</th>
<th align="center">complete</th>
<th align="center">n</th>
<th align="center">mean</th>
<th align="center">sd</th>
<th align="center">p0</th>
<th align="center">p25</th>
<th align="center">p50</th>
<th align="center">p75</th>
<th align="center">p100</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">avg_hatecrimes_per_100k_fbi</td>
<td align="center">1</td>
<td align="center">50</td>
<td align="center">51</td>
<td align="center">2.37</td>
<td align="center">1.71</td>
<td align="center">0.27</td>
<td align="center">1.29</td>
<td align="center">1.99</td>
<td align="center">3.18</td>
<td align="center">10.95</td>
</tr>
<tr class="even">
<td align="center">gini_index</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">0.45</td>
<td align="center">0.021</td>
<td align="center">0.42</td>
<td align="center">0.44</td>
<td align="center">0.45</td>
<td align="center">0.47</td>
<td align="center">0.53</td>
</tr>
<tr class="odd">
<td align="center">hate_crimes_per_100k_splc</td>
<td align="center">4</td>
<td align="center">47</td>
<td align="center">51</td>
<td align="center">0.3</td>
<td align="center">0.25</td>
<td align="center">0.067</td>
<td align="center">0.14</td>
<td align="center">0.23</td>
<td align="center">0.36</td>
<td align="center">1.52</td>
</tr>
<tr class="even">
<td align="center">share_non_citizen</td>
<td align="center">3</td>
<td align="center">48</td>
<td align="center">51</td>
<td align="center">0.055</td>
<td align="center">0.031</td>
<td align="center">0.01</td>
<td align="center">0.03</td>
<td align="center">0.045</td>
<td align="center">0.08</td>
<td align="center">0.13</td>
</tr>
<tr class="odd">
<td align="center">share_non_white</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">0.32</td>
<td align="center">0.16</td>
<td align="center">0.06</td>
<td align="center">0.2</td>
<td align="center">0.28</td>
<td align="center">0.42</td>
<td align="center">0.81</td>
</tr>
<tr class="even">
<td align="center">share_pop_hs</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">0.87</td>
<td align="center">0.034</td>
<td align="center">0.8</td>
<td align="center">0.84</td>
<td align="center">0.87</td>
<td align="center">0.9</td>
<td align="center">0.92</td>
</tr>
<tr class="odd">
<td align="center">share_pop_metro</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">0.75</td>
<td align="center">0.18</td>
<td align="center">0.31</td>
<td align="center">0.63</td>
<td align="center">0.79</td>
<td align="center">0.9</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">share_unemp_seas</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">0.05</td>
<td align="center">0.011</td>
<td align="center">0.028</td>
<td align="center">0.042</td>
<td align="center">0.051</td>
<td align="center">0.058</td>
<td align="center">0.073</td>
</tr>
<tr class="odd">
<td align="center">share_vote_trump</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">0.49</td>
<td align="center">0.12</td>
<td align="center">0.04</td>
<td align="center">0.41</td>
<td align="center">0.49</td>
<td align="center">0.57</td>
<td align="center">0.7</td>
</tr>
<tr class="even">
<td align="center">share_white_poverty</td>
<td align="center">0</td>
<td align="center">51</td>
<td align="center">51</td>
<td align="center">0.092</td>
<td align="center">0.025</td>
<td align="center">0.04</td>
<td align="center">0.075</td>
<td align="center">0.09</td>
<td align="center">0.1</td>
<td align="center">0.17</td>
</tr>
</tbody>
</table>
<p>Apart from summary statistics, last semester we discussed a variety of ways to graphically display variables. In week 3 we covered scatterplots, a graphical device to show the relationship between two quantitative variables. I don’t know if you remember the amount of point and click you had to do in Excel for getting this done. If not you can review the notes <a href="https://rawgit.com/maczokni/MSCD/master/Lesson_3.html#visualising-the-differences-between-groups">here</a>.</p>
<p>There’s also many different ways of producing graphics in R. In this course we rely on a package called <em>ggplot2</em>. It is already in the clusters, but if you are using your own laptop will need to install it first and then load it.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)</code></pre>
<p>Then we will use one of its functions to create a scatterplot. Don’t worry about understanding this code below, we will have a whole session on the ggplot function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(hate_crimes, <span class="kw">aes</span>(<span class="dt">x=</span>share_vote_trump, <span class="dt">y=</span>avg_hatecrimes_per_100k_fbi)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">shape=</span><span class="dv">1</span>) <span class="op">+</span>
<span class="st">     </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span>lm)</code></pre>
<pre><code>## Warning: Removed 1 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="01-intro_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<p>What do you think this graphic is telling you?</p>
</div>
<div id="quitting-rstudio" class="section level2">
<h2><span class="header-section-number">1.15</span> Quitting RStudio</h2>
<p>At some point, you will quit your R/R Studio session. I know, hard to visualise, right? Why would you want to do that? Anyhow, when that happens R Studio will ask you a hard question: “Save work space image to bla bla bla/.RData?” What to do? What does that even mean?</p>
<p>If you say “yes” what will happen is that all the objects you have in your environment will be preserved, alongside the <em>History</em> (which you can access in the top right set of windows) listing all the functions you have run within your session. So, next time you open this project all will be there. If you think that what is <em>real</em> is those objects and that history, well then you may think that’s what you want to do.</p>
<p>Truth is what is real is your scripts and the data that your scripts use as inputs. You don’t need anything that is in your environment, because you can recreate those things by re-running your scripts. I like keeping things tidy, so when I am asked whether I want to save the image, my answer is always no. Most long time users of R never save the workspace, nor care about saving the history either. Remember what is real is your scripts and the data.</p>
<p>Keep in mind though that you should not then panic if you open your next R Studio session and you don’t see any objects in your environment. The good news is you can generate them quickly enough (if you really need them) by re-running your scripts. I would suggest that at this point it may be helpful for you to get into this habit as well. I suspect otherwise you will be in week 9 of the semester and have an environment full of garbage you don’t really need.</p>
<p>What is more. I would suggest you go to the Tools drop down menu, select Global Options, and make sure you select “Never” where it says “Save workspace”. Then click “Apply”. This way you will never be asked to save what is in your global environment when you terminate a session.</p>
<p><img src="img/neversave.PNG" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="making-your-first-maps-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["CrimeMapping.pdf", "CrimeMapping.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
